<div {{ attributes }}>
  <form class="d-flex mt-3 mt-lg-0" role="search" data-action="live#action" data-live-action-param="search">
    <input 
      id="search" 
      class="form-control me-2" 
      type="search" 
      placeholder="Cake, Muffin, Ail..." 
      aria-label="Search"
      data-model="query"
      value="{{ query }}"
    />
    <button class="btn btn-outline-light" type="submit">Rechercher</button>
  </form>
  
  {% if query and this.result|length > 0 %}
    <div class="search-results mt-3 position-absolute">
      <h6 class="text-light mb-2">{{ this.result|length }} résultat(s) trouvé(s)</h6>
      <div class="list-group">
        {% for recipe in this.result %}
          <a href="{{ path('app_recipe_show', { id: recipe.id }) }}" class="list-group-item list-group-item-action bg-dark text-light border-secondary">
            <h6 class="mb-1 text-light">{{ recipe.title }}</h6>
            {% if recipe.description %}
            <p class="mb-1 text-muted">{{ recipe.description|slice(0, 100) }}{% if recipe.description|length > 100 %}...{% endif %}</p>
            {% endif %}
            {% if recipe.ingredientNames is defined and recipe.ingredientNames|length > 0 %}
            <small class="text-info">
              Ingrédients: {{ recipe.ingredientNames|slice(0, 3)|join(', ') }}
              {% if recipe.ingredientNames|length > 3 %}...{% endif %}
            </small>
            {% endif %}
          </a>
        {% endfor %}
      </div>
    </div>
  {% elseif query %}
    <div class="mt-3 position-absolute search-error">
      <div class="alert alert-warning mb-0">Aucun résultat trouvé pour "{{ query }}"</div>
    </div>
  {% endif %}
</div>